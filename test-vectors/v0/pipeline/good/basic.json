{
  "schema_version": "v0",
  "pipeline_id": "com.opertus.demo.fetch_parse_summarize",
  "nodes": [
    {
      "id": "fetch",
      "skill": "sha256:1111111111111111111111111111111111111111111111111111111111111111",
      "input": {
        "url": "https://example.com/"
      },
      "requested_caps": ["net.http"],
      "limits": {
        "cpu_ms": 500,
        "mem_mb": 64,
        "io_bytes": 1000000
      }
    },
    {
      "id": "parse",
      "skill": "sha256:2222222222222222222222222222222222222222222222222222222222222222"
    },
    {
      "id": "summarize",
      "skill": "sha256:3333333333333333333333333333333333333333333333333333333333333333",
      "on_error": "skip"
    }
  ],
  "edges": [
    {
      "from": "fetch",
      "to": "parse",
      "map": [
        {
          "from_path": "$.body",
          "to_path": "$.html"
        }
      ]
    },
    {
      "from": "parse",
      "to": "summarize",
      "map": [
        {
          "from_path": "$.text",
          "to_path": "$.text"
        }
      ]
    }
  ],
  "input_mapping": [
    {
      "from": "input",
      "from_path": "$.url",
      "to": "fetch",
      "to_path": "$.url"
    },
    {
      "from": "context",
      "from_path": "$.tenant_id",
      "to": "summarize",
      "to_path": "$.tenant"
    }
  ],
  "resource_limits": {
    "cpu_ms": 2000,
    "mem_mb": 128,
    "io_bytes": 8000000,
    "timeout_ms": 10000
  },
  "required_cap_sets": {
    "default": ["fs.read", "net.http"]
  },
  "run_policy": {
    "no_network_after_nodes": ["fetch"],
    "max_total_bytes": 8000000,
    "redaction": {
      "mode": "strict"
    }
  }
}
